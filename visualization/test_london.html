<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>London test </title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox-gl-js/v1.10.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v1.10.1/mapbox-gl.css' rel='stylesheet' />
<link rel="stylesheet" href="./styles.css" >
<style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<div id="map"></div>
<div id='console'>
	<div class='session'>
		<div class='session' id='sliderbar'>
			<h2>Time: <label id='Item'>"2020-01-30T00:00:00"</label></h2>
			<input id='slider' class='row' type='range' min='0' max='47' step='1' value='0' />
		</div>
	</div>
</div>

<script>
    mapboxgl.accessToken = '';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/outdoors-v11',
        center: [-0.444309864574433,51.442521283062],
        zoom: 14
    });
  
 	map.on('load', function() {
	    map.addLayer({
	       	id: 'full_forecast_nested_iter_500',
	        type: 'fill',
	        source: {
	          type: 'geojson',
	          data: './full_forecast_nested_iter_500.geojson' // replace this with the url of your own geojson
	        },
	    	paint: {
	    	    'fill-color': [
                    'interpolate',
                    ['linear'],
                    ['get', 'NO2_mean', ['get', "0"]],
                    0,'#0d00ff',
                    15, '#ff0f0f',
                    ],
	    	    'fill-opacity': 1.0
            }
        
    	});
       
    });

    document.getElementById('slider').addEventListener('input', function(e) {
        var hour = e.target.value;
        console.log(hour)
        // update the map
        map.setPaintProperty('full_forecast_nested_iter_500', 'fill-color', [
                    'interpolate',
                    ['linear'],
                    ['get', 'NO2_mean', ['get', hour]],
                    0,'#0d00ff',
                    15, '#ff0f0f'
                    ]);
    });
</script>
</body>
</html>
