
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleanair Package &#8212; cleanair 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User’s Guide" href="../guide.html" />
    <link rel="prev" title="Welcome to cleanair’s documentation!" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="cleanair-package">
<h1>Cleanair Package<a class="headerlink" href="#cleanair-package" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="section" id="dashboard-module">
<h2>Dashboard module<a class="headerlink" href="#dashboard-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cleanair.databases">
<span id="databases-module"></span><h2>Databases module<a class="headerlink" href="#module-cleanair.databases" title="Permalink to this headline">¶</a></h2>
<p>Module for interacting with the Azure Postgres database</p>
<dl class="py class">
<dt id="cleanair.databases.Base">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.databases.</code><code class="sig-name descname">Base</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.Base" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The most base type</p>
<dl class="py attribute">
<dt id="cleanair.databases.Base.metadata">
<code class="sig-name descname">metadata</code><em class="property"> = MetaData(bind=None)</em><a class="headerlink" href="#cleanair.databases.Base.metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.databases.Connector">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.databases.</code><code class="sig-name descname">Connector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">secretfile</span></em>, <em class="sig-param"><span class="n">connection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.Connector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.db_connection_mixin.DBConnectionMixin</span></code></p>
<p>Base class for connecting to databases with sqlalchemy</p>
<dl class="py method">
<dt id="cleanair.databases.Connector.check_internet_connection">
<code class="sig-name descname">check_internet_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span><span class="o">=</span><span class="default_value">'http://www.google.com/'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">interval</span><span class="o">=</span><span class="default_value">10</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.Connector.check_internet_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the internet is accessible
Repeated checks within <cite>interval</cite> seconds will be skipped</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.Connector.check_schema_exists">
<code class="sig-name descname">check_schema_exists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schema_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.Connector.check_schema_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a schema exists</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.Connector.engine">
<em class="property">property </em><code class="sig-name descname">engine</code><a class="headerlink" href="#cleanair.databases.Connector.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Access the class-level sqlalchemy engine</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.Connector.ensure_database_exists">
<code class="sig-name descname">ensure_database_exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.Connector.ensure_database_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure the database exists</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.Connector.ensure_extensions">
<code class="sig-name descname">ensure_extensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.Connector.ensure_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure required extensions are installed publicly</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.Connector.ensure_schema">
<code class="sig-name descname">ensure_schema</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schema_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.Connector.ensure_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that requested schema exists</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.Connector.initialise_tables">
<code class="sig-name descname">initialise_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.Connector.initialise_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that all table connections exist</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.Connector.open_session">
<code class="sig-name descname">open_session</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.Connector.open_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a session as a context manager which will thereby self-close</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.Connector.sessionfactory">
<em class="property">property </em><code class="sig-name descname">sessionfactory</code><a class="headerlink" href="#cleanair.databases.Connector.sessionfactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Access the class-level sqlalchemy sessionfactory</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.databases.DBConfig">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.databases.</code><code class="sig-name descname">DBConfig</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_file</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.databases.connector.Connector</span></code></p>
<p>Class to manage database configuration</p>
<dl class="py method">
<dt id="cleanair.databases.DBConfig.assign_role_connect">
<code class="sig-name descname">assign_role_connect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">role_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.assign_role_connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow a role to connect to the database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>role_name</strong> (<em>str</em>) – Role name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.assign_role_schema_default_privilege">
<code class="sig-name descname">assign_role_schema_default_privilege</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">role_name</span></em>, <em class="sig-param"><span class="n">schema_name</span></em>, <em class="sig-param"><span class="n">privileges</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.assign_role_schema_default_privilege" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a role default privilegs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>role_name</strong> (<em>str</em>) – Role name</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name</p></li>
<li><p><strong>privileges</strong> (<em>Lis</em><em>[</em><em>str</em><em>]</em>) – A list of privileges to assign</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.assign_role_schema_default_sequences">
<code class="sig-name descname">assign_role_schema_default_sequences</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">role_name</span></em>, <em class="sig-param"><span class="n">schema_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.assign_role_schema_default_sequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a role default sequences on a schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>role_name</strong> (<em>str</em>) – Role name</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.assign_role_schema_privilege">
<code class="sig-name descname">assign_role_schema_privilege</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">role_name</span></em>, <em class="sig-param"><span class="n">schema_name</span></em>, <em class="sig-param"><span class="n">privileges</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.assign_role_schema_privilege" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a role a list of privileges</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>role_name</strong> (<em>str</em>) – Role name</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name</p></li>
<li><p><strong>privileges</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – A list of privileges to assign</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.assign_role_schema_sequences">
<code class="sig-name descname">assign_role_schema_sequences</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">role_name</span></em>, <em class="sig-param"><span class="n">schema_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.assign_role_schema_sequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a role to all sequences on schema</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>role_name</strong> (<em>str</em>) – Role name</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.assign_role_schema_usage">
<code class="sig-name descname">assign_role_schema_usage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">role_name</span></em>, <em class="sig-param"><span class="n">schema_name</span></em>, <em class="sig-param"><span class="n">create</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.assign_role_schema_usage" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign a role to all schemas</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>role_name</strong> (<em>str</em>) – Role name</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name</p></li>
<li><p><strong>create</strong> (<em>bool</em>) – Give the user CREATE on the schema (i.e. they can create objects)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.configure_all_roles">
<code class="sig-name descname">configure_all_roles</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.configure_all_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure roles as defined in the configuration file</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.create_role">
<code class="sig-name descname">create_role</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">role_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.create_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new role</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>role_name</strong> (<em>str</em>) – Role name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.create_schema">
<code class="sig-name descname">create_schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.create_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Create schemas on database</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.create_user">
<code class="sig-name descname">create_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">password</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.create_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new user and assign to a role</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>username</strong> (<em>str</em>) – A username</p></li>
<li><p><strong>password</strong> (<em>str</em>) – A user’s password</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.database_name">
<em class="property">property </em><code class="sig-name descname">database_name</code><a class="headerlink" href="#cleanair.databases.DBConfig.database_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return name of database in config file</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.grant_role_to_user">
<code class="sig-name descname">grant_role_to_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">role</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.grant_role_to_user" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>username</strong> (<em>str</em>) – A username</p></li>
<li><p><strong>roles</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – A list of roles to assign a user to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.list_roles">
<code class="sig-name descname">list_roles</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.list_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of existing database roles</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.read_config">
<em class="property">static </em><code class="sig-name descname">read_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBConfig.read_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a database configuration file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_file</strong> (<em>str</em>) – Location of configuration file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary of the required configuration</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.roles">
<em class="property">property </em><code class="sig-name descname">roles</code><a class="headerlink" href="#cleanair.databases.DBConfig.roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of roles</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBConfig.schema">
<em class="property">property </em><code class="sig-name descname">schema</code><a class="headerlink" href="#cleanair.databases.DBConfig.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of schemas from the database</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.databases.DBInteractor">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.databases.</code><code class="sig-name descname">DBInteractor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">secretfile</span></em>, <em class="sig-param"><span class="n">initialise_tables</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">connection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">secret_dict</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBInteractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for interacting with tables in the Azure database</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.databases.DBReader">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.databases.</code><code class="sig-name descname">DBReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.databases.db_interactor.DBInteractor</span></code></p>
<p>Base class for reading from the Azure database</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.databases.DBWriter">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.databases.</code><code class="sig-name descname">DBWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.databases.db_interactor.DBInteractor</span></code></p>
<p>Base class for writing to the Azure database</p>
<dl class="py method">
<dt id="cleanair.databases.DBWriter.commit_records">
<code class="sig-name descname">commit_records</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">records</span></em>, <em class="sig-param"><span class="n">on_conflict</span></em>, <em class="sig-param"><span class="n">table</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBWriter.commit_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit records to the database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> – a session object</p></li>
<li><p><strong>records</strong> – Either a list of sqlalchemy records, list of dictionaries (table arg must be provided)
or an sqlalchemy subquery object (table arg must be provided)</p></li>
<li><p><strong>on_conflict</strong> – “overwrite” or “ignore”.</p></li>
<li><p><strong>table</strong> – Optional. sqlalchemy table. If table provide sqlalchemy core used for insert</p></li>
</ul>
</dd>
</dl>
<p>If table is provided it will insert using sqlalchemy’s core rather than the ORM.</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.databases.DBWriter.update_remote_tables">
<code class="sig-name descname">update_remote_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.databases.DBWriter.update_remote_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all relevant tables on the remote database</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cleanair.decorators">
<span id="decorators-module"></span><h2>Decorators module<a class="headerlink" href="#module-cleanair.decorators" title="Permalink to this headline">¶</a></h2>
<p>Module for interacting with the Azure Postgres database</p>
<dl class="py class">
<dt id="cleanair.decorators.SuppressStdoutStderr">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.decorators.</code><code class="sig-name descname">SuppressStdoutStderr</code><a class="headerlink" href="#cleanair.decorators.SuppressStdoutStderr" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A context manager for doing a “deep suppression” of stdout and stderr in
Python, i.e. will suppress all print, even if the print originates in a
compiled C/Fortran sub-function.</p>
<p>This will not suppress raised exceptions, since exceptions are printed
to stderr just before a script exits, and after the context manager has
exited (at least, I think that is why it lets exceptions through).</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.decorators.db_query">
<code class="sig-prename descclassname">cleanair.decorators.</code><code class="sig-name descname">db_query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query_f</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.decorators.db_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for functions that return an sqlalchemy query object.
kwargs:</p>
<blockquote>
<div><p>output_type: Either ‘query’, ‘subquery’, ‘df’ or ‘list’. list returns the first column of the query</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="cleanair.decorators.robust_api">
<code class="sig-prename descclassname">cleanair.decorators.</code><code class="sig-name descname">robust_api</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">api_call</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.decorators.robust_api" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper function for making multiple calls to the same API endpoint to overcome server errors
kwargs:</p>
<blockquote>
<div><p>n_repeat: Maximum number of calls to the API that can be made
sleep_time: Time to sleep between api calls in seconds</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-cleanair.features">
<span id="features-module"></span><h2>Features module<a class="headerlink" href="#module-cleanair.features" title="Permalink to this headline">¶</a></h2>
<p>Module for feature extraction</p>
<dl class="py class">
<dt id="cleanair.features.OSHighwayFeatures">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.features.</code><code class="sig-name descname">OSHighwayFeatures</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dynamic</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">sources</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.features.OSHighwayFeatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.features.feature_extractor.FeatureExtractor</span></code></p>
<p>Extract features for OSHighways</p>
<dl class="py method">
<dt id="cleanair.features.OSHighwayFeatures.features">
<em class="property">property </em><code class="sig-name descname">features</code><a class="headerlink" href="#cleanair.features.OSHighwayFeatures.features" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of features of the kind:</p>
<dl>
<dt>{</dt><dd><dl>
<dt>“building_height”: {</dt><dd><p>“type”: “value”,
“feature_dict”: {</p>
<blockquote>
<div><p>“calculated_height_of_building”: [“*”]</p>
</div></blockquote>
<p>},
“aggfunc”: <a href="#id1"><span class="problematic" id="id2">max_</span></a></p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.features.OSHighwayFeatures.table">
<em class="property">property </em><code class="sig-name descname">table</code><a class="headerlink" href="#cleanair.features.OSHighwayFeatures.table" title="Permalink to this definition">¶</a></dt>
<dd><p>Either returns an sql table instance or a subquery</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.features.ScootForecastFeatures">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.features.</code><code class="sig-name descname">ScootForecastFeatures</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.features.ScootForecastFeatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.features.scoot_features.ScootFeaturesBase</span></code></p>
<p>Process SCOOT forecasts into model features</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.features.ScootReadingFeatures">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.features.</code><code class="sig-name descname">ScootReadingFeatures</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.features.ScootReadingFeatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.features.scoot_features.ScootFeaturesBase</span></code></p>
<p>Process SCOOT readings into model features</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.features.StreetCanyonFeatures">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.features.</code><code class="sig-name descname">StreetCanyonFeatures</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dynamic</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">sources</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.features.StreetCanyonFeatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.features.feature_extractor.FeatureExtractor</span></code></p>
<p>Extract features for StreetCanyon</p>
<dl class="py method">
<dt id="cleanair.features.StreetCanyonFeatures.features">
<em class="property">property </em><code class="sig-name descname">features</code><a class="headerlink" href="#cleanair.features.StreetCanyonFeatures.features" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of features of the kind:</p>
<dl>
<dt>{</dt><dd><dl>
<dt>“building_height”: {</dt><dd><p>“type”: “value”,
“feature_dict”: {</p>
<blockquote>
<div><p>“calculated_height_of_building”: [“*”]</p>
</div></blockquote>
<p>},
“aggfunc”: <a href="#id3"><span class="problematic" id="id4">max_</span></a></p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.features.StreetCanyonFeatures.table">
<em class="property">property </em><code class="sig-name descname">table</code><a class="headerlink" href="#cleanair.features.StreetCanyonFeatures.table" title="Permalink to this definition">¶</a></dt>
<dd><p>Either returns an sql table instance or a subquery</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.features.UKMapFeatures">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.features.</code><code class="sig-name descname">UKMapFeatures</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dynamic</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">sources</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.features.UKMapFeatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.features.feature_extractor.FeatureExtractor</span></code></p>
<p>Extract features for UKMap</p>
<dl class="py method">
<dt id="cleanair.features.UKMapFeatures.features">
<em class="property">property </em><code class="sig-name descname">features</code><a class="headerlink" href="#cleanair.features.UKMapFeatures.features" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of features of the kind:</p>
<dl>
<dt>{</dt><dd><dl>
<dt>“building_height”: {</dt><dd><p>“type”: “value”,
“feature_dict”: {</p>
<blockquote>
<div><p>“calculated_height_of_building”: [“*”]</p>
</div></blockquote>
<p>},
“aggfunc”: <a href="#id5"><span class="problematic" id="id6">max_</span></a></p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.features.UKMapFeatures.table">
<em class="property">property </em><code class="sig-name descname">table</code><a class="headerlink" href="#cleanair.features.UKMapFeatures.table" title="Permalink to this definition">¶</a></dt>
<dd><p>Either returns an sql table instance or a subquery</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cleanair.inputs">
<span id="inputs-module"></span><h2>Inputs module<a class="headerlink" href="#module-cleanair.inputs" title="Permalink to this headline">¶</a></h2>
<p>Module for input datasources</p>
<dl class="py class">
<dt id="cleanair.inputs.AQEWriter">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.inputs.</code><code class="sig-name descname">AQEWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.AQEWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.date_range_mixin.DateRangeMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.api_request_mixin.APIRequestMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.databases.db_writer.DBWriter</span></code></p>
<p>Manage interactions with the AQE table on Azure</p>
<dl class="py attribute">
<dt id="cleanair.inputs.AQEWriter.reading_keys">
<code class="sig-name descname">reading_keys</code><em class="property"> = ['SiteCode', 'SpeciesCode', 'MeasurementStartUTC', 'MeasurementEndUTC']</em><a class="headerlink" href="#cleanair.inputs.AQEWriter.reading_keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.AQEWriter.request_site_entries">
<code class="sig-name descname">request_site_entries</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.AQEWriter.request_site_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Request all AQE sites
Remove any that do not have an opening date</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.AQEWriter.request_site_readings">
<code class="sig-name descname">request_site_readings</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_date</span></em>, <em class="sig-param"><span class="n">end_date</span></em>, <em class="sig-param"><span class="n">site_code</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.AQEWriter.request_site_readings" title="Permalink to this definition">¶</a></dt>
<dd><p>Request all readings for {site_code} between {start_date} and {end_date}
Remove duplicates and add the site_code</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.AQEWriter.update_reading_table">
<code class="sig-name descname">update_reading_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">usecore</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.AQEWriter.update_reading_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the readings table with new sensor readings.</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.AQEWriter.update_remote_tables">
<code class="sig-name descname">update_remote_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.AQEWriter.update_remote_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all relevant tables on the remote database</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.AQEWriter.update_site_list_table">
<code class="sig-name descname">update_site_list_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.AQEWriter.update_site_list_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the aqe_site table</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.inputs.LAQNWriter">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.inputs.</code><code class="sig-name descname">LAQNWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.LAQNWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.date_range_mixin.DateRangeMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.api_request_mixin.APIRequestMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.databases.db_writer.DBWriter</span></code></p>
<p>Get data from the LAQN network via the API maintained by Kings College London:
(<a class="reference external" href="https://www.londonair.org.uk/Londonair/API/">https://www.londonair.org.uk/Londonair/API/</a>)</p>
<dl class="py method">
<dt id="cleanair.inputs.LAQNWriter.request_site_entries">
<code class="sig-name descname">request_site_entries</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.LAQNWriter.request_site_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Request all LAQN sites
Remove any that do not have an opening date</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.LAQNWriter.request_site_readings">
<code class="sig-name descname">request_site_readings</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_date</span></em>, <em class="sig-param"><span class="n">end_date</span></em>, <em class="sig-param"><span class="n">site_code</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.LAQNWriter.request_site_readings" title="Permalink to this definition">¶</a></dt>
<dd><p>Request all readings for {site_code} between {start_date} and {end_date}
Remove duplicates and add the site_code</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.LAQNWriter.update_reading_table">
<code class="sig-name descname">update_reading_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">usecore</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.LAQNWriter.update_reading_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the readings table with new sensor readings.</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.LAQNWriter.update_remote_tables">
<code class="sig-name descname">update_remote_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.LAQNWriter.update_remote_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all relevant tables on the remote database</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.LAQNWriter.update_site_list_table">
<code class="sig-name descname">update_site_list_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.LAQNWriter.update_site_list_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the laqn_site table</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.inputs.RectGridWriter">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.inputs.</code><code class="sig-name descname">RectGridWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.RectGridWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.databases.db_writer.DBWriter</span></code></p>
<p>Manage interactions with the RectGrid table on Azure</p>
<dl class="py method">
<dt id="cleanair.inputs.RectGridWriter.build_cell">
<code class="sig-name descname">build_cell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">latitude</span></em>, <em class="sig-param"><span class="n">longitude</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.RectGridWriter.build_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a rectangular cell around a given latitude and longitude</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.RectGridWriter.update_remote_tables">
<code class="sig-name descname">update_remote_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.RectGridWriter.update_remote_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload grid data</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.inputs.SatelliteWriter">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.inputs.</code><code class="sig-name descname">SatelliteWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">copernicus_key</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.SatelliteWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.date_range_mixin.DateRangeMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.databases.db_writer.DBWriter</span></code></p>
<p>Get Satellite data from
(<a class="reference external" href="https://download.regional.atmosphere.copernicus.eu/services/CAMS50">https://download.regional.atmosphere.copernicus.eu/services/CAMS50</a>)
API INFO:
<a class="reference external" href="https://www.regional.atmosphere.copernicus.eu/doc/Guide_Numerical_Data_CAMS_new.pdf">https://www.regional.atmosphere.copernicus.eu/doc/Guide_Numerical_Data_CAMS_new.pdf</a>
IMPORTANT:
Satellite forecast data should become available on API at:</p>
<blockquote>
<div><p>06:30 UTC for 0-48 hours.
08:30 UTC for 49-72 hours.</p>
</div></blockquote>
<dl class="py method">
<dt id="cleanair.inputs.SatelliteWriter.build_satellite_grid">
<code class="sig-name descname">build_satellite_grid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">satellite_boxes_df</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.build_satellite_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a dataframe of satellite grid points given a dataframe of satellite boxes</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.SatelliteWriter.get_response">
<em class="property">static </em><code class="sig-name descname">get_response</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">n_repeat</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">sleep_time</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.get_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the response from an API</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.SatelliteWriter.grib_to_df">
<code class="sig-name descname">grib_to_df</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">satellite_bytes</span></em>, <em class="sig-param"><span class="n">period</span></em>, <em class="sig-param"><span class="n">species</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.grib_to_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Take satellite bytes and load into a pandas dataframe, converting NO2 units if required</p>
</dd></dl>

<dl class="py attribute">
<dt id="cleanair.inputs.SatelliteWriter.half_grid">
<code class="sig-name descname">half_grid</code><em class="property"> = 0.05</em><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.half_grid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="cleanair.inputs.SatelliteWriter.n_points_lat">
<code class="sig-name descname">n_points_lat</code><em class="property"> = 12</em><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.n_points_lat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="cleanair.inputs.SatelliteWriter.n_points_lon">
<code class="sig-name descname">n_points_lon</code><em class="property"> = 8</em><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.n_points_lon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="cleanair.inputs.SatelliteWriter.periods">
<code class="sig-name descname">periods</code><em class="property"> = ['0H24H', '25H48H', '49H72H']</em><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.periods" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.SatelliteWriter.read_grib_file">
<code class="sig-name descname">read_grib_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filecontent</span></em>, <em class="sig-param"><span class="n">period</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.read_grib_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a grib file into a pandas dataframe</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.SatelliteWriter.request_satellite_data">
<code class="sig-name descname">request_satellite_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_date</span></em>, <em class="sig-param"><span class="n">period</span></em>, <em class="sig-param"><span class="n">pollutant</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.request_satellite_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Request satellite data. Will make multiple attempts to read data and raise an
exception if it fails</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_date</strong> – Date to collect data from</p></li>
<li><p><strong>period</strong> – The time periods to request data for: 0H24H, 25H48H, 49H72H</p></li>
<li><p><strong>pollutant</strong> – ‘NO2’, ‘PM25’, ‘PM10’, ‘O3’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="cleanair.inputs.SatelliteWriter.species">
<code class="sig-name descname">species</code><em class="property"> = ['NO2', 'PM25', 'PM10', 'O3']</em><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.species" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.SatelliteWriter.update_interest_points">
<code class="sig-name descname">update_interest_points</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.update_interest_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Create interest points and insert into the database</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.SatelliteWriter.update_reading_table">
<code class="sig-name descname">update_reading_table</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.update_reading_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the satellite reading table</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.SatelliteWriter.update_remote_tables">
<code class="sig-name descname">update_remote_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.SatelliteWriter.update_remote_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all relevant tables on the remote database</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.inputs.ScootWriter">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.inputs.</code><code class="sig-name descname">ScootWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">aws_key_id</span></em>, <em class="sig-param"><span class="n">aws_key</span></em>, <em class="sig-param"><span class="n">detector_ids</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.ScootWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.date_range_mixin.DateRangeMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.databases.db_writer.DBWriter</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.database_query_mixin.DBQueryMixin</span></code></p>
<p>Class to get data from the Scoot traffic detector network via the S3 bucket maintained by TfL:
(<a class="reference external" href="https://s3.console.aws.amazon.com/s3/buckets/surface.data.tfl.gov.uk">https://s3.console.aws.amazon.com/s3/buckets/surface.data.tfl.gov.uk</a>)</p>
<dl class="py method">
<dt id="cleanair.inputs.ScootWriter.aggregate_scoot_data">
<code class="sig-name descname">aggregate_scoot_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df_readings</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.ScootWriter.aggregate_scoot_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate scoot data by detector ID into hourly chunks</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.ScootWriter.combine_by_detector_id">
<code class="sig-name descname">combine_by_detector_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_df</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.ScootWriter.combine_by_detector_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate measurements by detector ID across several readings</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.ScootWriter.get_existing_scoot_data">
<code class="sig-name descname">get_existing_scoot_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">'query'</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">error_empty</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.ScootWriter.get_existing_scoot_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the SCOOT readings already in the database for the given time range and set of detector IDs</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.ScootWriter.get_remote_filenames">
<em class="property">static </em><code class="sig-name descname">get_remote_filenames</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_datetime</span></em>, <em class="sig-param"><span class="n">end_datetime</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.ScootWriter.get_remote_filenames" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all possible remote file details for the period in question</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.ScootWriter.request_remote_data">
<code class="sig-name descname">request_remote_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_datetime</span></em>, <em class="sig-param"><span class="n">end_datetime</span></em>, <em class="sig-param"><span class="n">detector_ids</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.ScootWriter.request_remote_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Request all readings between {start_date} and {end_date}.
Remove readings with unknown detector ID or detector faults.</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.ScootWriter.request_site_entries">
<code class="sig-name descname">request_site_entries</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.ScootWriter.request_site_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of known detectors</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.ScootWriter.update_remote_tables">
<code class="sig-name descname">update_remote_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.ScootWriter.update_remote_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the database with new Scoot traffic data.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.inputs.StaticWriter">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.inputs.</code><code class="sig-name descname">StaticWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_file</span></em>, <em class="sig-param"><span class="n">schema</span></em>, <em class="sig-param"><span class="n">table</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.StaticWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.databases.db_writer.DBWriter</span></code></p>
<p>Manage interactions with the static database on Azure</p>
<dl class="py method">
<dt id="cleanair.inputs.StaticWriter.configure_tables">
<code class="sig-name descname">configure_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.StaticWriter.configure_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Tidy up the databases by doing the following:</p>
<p>Ensuring there is an index on the geometry column
Dropping (some) duplicate rows
Dropping duplicate/unnecessary columns
Converting some column types
Adding a primary key</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.StaticWriter.schema_table">
<em class="property">property </em><code class="sig-name descname">schema_table</code><a class="headerlink" href="#cleanair.inputs.StaticWriter.schema_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Get schema and table where the current dataset will live</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.StaticWriter.update_remote_tables">
<code class="sig-name descname">update_remote_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.StaticWriter.update_remote_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to upload static files and configure the tables if successful</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.inputs.StaticWriter.upload_static_files">
<code class="sig-name descname">upload_static_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.inputs.StaticWriter.upload_static_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload static data to the inputs database</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cleanair.loggers">
<span id="loggers-module"></span><h2>Loggers module<a class="headerlink" href="#module-cleanair.loggers" title="Permalink to this headline">¶</a></h2>
<p>Loggers</p>
<dl class="py function">
<dt id="cleanair.loggers.bold">
<code class="sig-prename descclassname">cleanair.loggers.</code><code class="sig-name descname">bold</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.loggers.bold" title="Permalink to this definition">¶</a></dt>
<dd><p>Make text bold</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.loggers.duration">
<code class="sig-prename descclassname">cleanair.loggers.</code><code class="sig-name descname">duration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_time</span></em>, <em class="sig-param"><span class="n">end_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.loggers.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a human-readable duration from a start and end time in seconds</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.loggers.duration_from_seconds">
<code class="sig-prename descclassname">cleanair.loggers.</code><code class="sig-name descname">duration_from_seconds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seconds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.loggers.duration_from_seconds" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a human-readable duration from a number of seconds</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.loggers.get_logger">
<code class="sig-prename descclassname">cleanair.loggers.</code><code class="sig-name descname">get_logger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.loggers.get_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a logger with the appropriate name</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.loggers.green">
<code class="sig-prename descclassname">cleanair.loggers.</code><code class="sig-name descname">green</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.loggers.green" title="Permalink to this definition">¶</a></dt>
<dd><p>Make text green</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.loggers.initialise_logging">
<code class="sig-prename descclassname">cleanair.loggers.</code><code class="sig-name descname">initialise_logging</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">verbosity</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.loggers.initialise_logging" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise logging for this process</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.loggers.red">
<code class="sig-prename descclassname">cleanair.loggers.</code><code class="sig-name descname">red</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.loggers.red" title="Permalink to this definition">¶</a></dt>
<dd><p>Make text red</p>
</dd></dl>

</div>
<div class="section" id="module-cleanair.metrics">
<span id="metrics-module"></span><h2>Metrics module<a class="headerlink" href="#module-cleanair.metrics" title="Permalink to this headline">¶</a></h2>
<p>Methods for evaluating metrics of a model fit.</p>
<dl class="py function">
<dt id="cleanair.metrics.evaluate_model_data">
<code class="sig-prename descclassname">cleanair.metrics.</code><code class="sig-name descname">evaluate_model_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model_data</span></em>, <em class="sig-param"><span class="n">metric_methods</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.metrics.evaluate_model_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a model data object, evaluate the predictions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_data</strong> (<em>ModelData</em>) – A model data object with updated predictions.</p></li>
<li><p><strong>metric_methods</strong> (<em>dict</em>) – A dictionary where keys are the name of a metric and values
are a function that takes two numpy arrays of the same shape.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – See Other Parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>sensor_scores_df</strong> (<em>pd.DataFrame</em>) – For every instance of the experiment, we calculate the score
of a sensor over the whole prediction time period.</p></li>
<li><p><strong>temporal_scores_df</strong> (<em>pd.DataFrame</em>) – For every instance of an experiment, we calculate the scores
over all sensors given a slice in time.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Other Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evaluate_testing</strong> (<em>bool, optional</em>) – If true, this function will evaluate the predictions made
on the testing set of data.</p></li>
<li><p><strong>evaluate_training</strong> (<em>bool, optional</em>) – If true, this function will evaluate the predictions made
on the training set of data.</p></li>
<li><p><strong>pred_cols</strong> (<em>list, optional</em>) – Columns containing predictions.
Default is [“NO2_mean”].</p></li>
<li><p><strong>test_cols</strong> (<em>list, optional</em>) – Columns containing observations during prediction period.
Default is [“NO2”].</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If value of kwargs are not valid values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanair.metrics.get_metric_methods">
<code class="sig-prename descclassname">cleanair.metrics.</code><code class="sig-name descname">get_metric_methods</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">r2_score</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">mae</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">mse</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.metrics.get_metric_methods" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionary of metric keys and methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r2_score</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to use the r2_score score.</p></li>
<li><p><strong>mae</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to use the mae score.</p></li>
<li><p><strong>mse</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to use mean squared error.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Keys are names of metrics, values are a function that takes
two numpy arrays of the same shape.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Key is a string of the metric name.
Value is a metric evaluation function that takes
two equally sized numpy arrays as parameters.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanair.metrics.measure_scores_by_hour">
<code class="sig-prename descclassname">cleanair.metrics.</code><code class="sig-name descname">measure_scores_by_hour</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pred_df</span></em>, <em class="sig-param"><span class="n">metric_methods</span></em>, <em class="sig-param"><span class="n">datetime_col</span><span class="o">=</span><span class="default_value">'measurement_start_utc'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.metrics.measure_scores_by_hour" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure metric scores for each hour of prediction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pred_df</strong> (<em>DataFrame</em>) – Indexed by datetime. Must have a column of testing data and
a column from the predicted air quality at the same points
as the testing data.</p></li>
<li><p><strong>metric_methods</strong> (<em>dict</em>) – Keys are name of metric.
Values are functions that take in two numpy/series and compute the score.</p></li>
<li><p><strong>datetime_col</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the datetime columns in the dataframe.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>scores</strong> – Indexed by datetime.
Each column is a metric in metric_methods.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
<dt class="field-even">Other Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>pred_cols</strong> (<em>list, optional</em>) – Names of the column that are predictions.
Length must match <cite>test_cols</cite>.</p></li>
<li><p><strong>test_cols</strong> (<em>list, optional</em>) – Names of columns in the dataframe that are the true observations.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cleanair.metrics.measure_scores_by_sensor">
<code class="sig-prename descclassname">cleanair.metrics.</code><code class="sig-name descname">measure_scores_by_sensor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pred_df</span></em>, <em class="sig-param"><span class="n">metric_methods</span></em>, <em class="sig-param"><span class="n">groupby_col</span><span class="o">=</span><span class="default_value">'point_id'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.metrics.measure_scores_by_sensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Group the pred_df by sensor then measure scores on each sensor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pred_df</strong> (<em>DataFrame</em>) – Indexed by datetime. Must have a column of testing data and
a column from the predicted air quality at the same points
as the testing data.</p></li>
<li><p><strong>metric_methods</strong> (<em>dict</em>) – Keys are name of metric.
Values are functions that take in two numpy/series and compute the score.</p></li>
<li><p><strong>groupby_col</strong> (<em>str</em>) – Name of the column containing the sensor ids.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe of scores by sensor.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
<dt class="field-even">Other Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>pred_cols</strong> (<em>list, optional</em>) – Names of the column that are predictions.
Length must match <cite>test_cols</cite>.</p></li>
<li><p><strong>test_cols</strong> (<em>list, optional</em>) – Names of columns in the dataframe that are the true observations.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-cleanair.mixins">
<span id="mixins-module"></span><h2>Mixins module<a class="headerlink" href="#module-cleanair.mixins" title="Permalink to this headline">¶</a></h2>
<p>Mixins for adding functionality</p>
<dl class="py class">
<dt id="cleanair.mixins.APIRequestMixin">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.mixins.</code><code class="sig-name descname">APIRequestMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.APIRequestMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manage interactions with an external API</p>
<dl class="py method">
<dt id="cleanair.mixins.APIRequestMixin.get_available_datetimes">
<em class="property">static </em><code class="sig-name descname">get_available_datetimes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">site</span></em>, <em class="sig-param"><span class="n">start_date</span></em>, <em class="sig-param"><span class="n">end_date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.APIRequestMixin.get_available_datetimes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dates that data is available for a site between start_date and end_date
If no data is available between these dates returns None</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.APIRequestMixin.get_readings_by_site">
<code class="sig-name descname">get_readings_by_site</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">site_list_query</span></em>, <em class="sig-param"><span class="n">start_date</span></em>, <em class="sig-param"><span class="n">end_date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.APIRequestMixin.get_readings_by_site" title="Permalink to this definition">¶</a></dt>
<dd><p>Request a list of readings for a list of sites between start_date and end_date</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.APIRequestMixin.get_response">
<em class="property">static </em><code class="sig-name descname">get_response</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">api_endpoint</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">60.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.APIRequestMixin.get_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the response from an API</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.APIRequestMixin.request_site_readings">
<code class="sig-name descname">request_site_readings</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_date</span></em>, <em class="sig-param"><span class="n">end_date</span></em>, <em class="sig-param"><span class="n">site_code</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.APIRequestMixin.request_site_readings" title="Permalink to this definition">¶</a></dt>
<dd><p>Request all readings between {start_date} and {end_date}, removing duplicates.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.mixins.DBConnectionMixin">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.mixins.</code><code class="sig-name descname">DBConnectionMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">secretfile</span></em>, <em class="sig-param"><span class="n">secret_dict</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allow_env_pass</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBConnectionMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Create database connection strings</p>
<dl class="py method">
<dt id="cleanair.mixins.DBConnectionMixin.connection_keys">
<em class="property">property </em><code class="sig-name descname">connection_keys</code><a class="headerlink" href="#cleanair.mixins.DBConnectionMixin.connection_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return valid connection keys</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBConnectionMixin.connection_string">
<em class="property">property </em><code class="sig-name descname">connection_string</code><a class="headerlink" href="#cleanair.mixins.DBConnectionMixin.connection_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a connection string</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBConnectionMixin.load_connection_info">
<code class="sig-name descname">load_connection_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">secret_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBConnectionMixin.load_connection_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads database secrets from a json file.
Check file system is accessable from docker and return database login info</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBConnectionMixin.read_environment_password">
<em class="property">static </em><code class="sig-name descname">read_environment_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBConnectionMixin.read_environment_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if PGPASSWORD exists as an environment variable and return its values if it does</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary of containing the value of the environment value PGPASSWORD if it exists. Else None</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBConnectionMixin.replace_connection_values">
<code class="sig-name descname">replace_connection_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">connection_info</span></em>, <em class="sig-param"><span class="n">secret_dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBConnectionMixin.replace_connection_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace values in connection_info with those in secret_dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection_info</strong> (<em>dict</em>) – A dictionary of connection parameters</p></li>
<li><p><strong>secret_dict</strong> (<em>dict</em>) – A dictionary of connection parameters to replace matching
parameters in connection_info</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary of connection parameters</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.mixins.DBQueryMixin">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.mixins.</code><code class="sig-name descname">DBQueryMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Common database queries. Child classes must also inherit from DBWriter</p>
<dl class="py method">
<dt id="cleanair.mixins.DBQueryMixin.get_aqe_readings">
<code class="sig-name descname">get_aqe_readings</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">'query'</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">error_empty</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin.get_aqe_readings" title="Permalink to this definition">¶</a></dt>
<dd><p>Get AQE readings from database</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBQueryMixin.get_available_dynamic_features">
<code class="sig-name descname">get_available_dynamic_features</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">'query'</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">error_empty</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin.get_available_dynamic_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of the available dynamic features in the database.
Only returns features that are available between start_date and end_date</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBQueryMixin.get_available_interest_points">
<code class="sig-name descname">get_available_interest_points</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">'query'</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">error_empty</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin.get_available_interest_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the available interest points for a list of sources, excluding any LAQN or AQE sites that are closed.
Only returns points withing the London boundary
Satellite returns features outside of london boundary, while laqn and aqe do not.
:param sources: A list of sources to include
:param point_ids: A list of point_ids to include. Default of None returns all points</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBQueryMixin.get_available_sources">
<code class="sig-name descname">get_available_sources</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">'query'</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">error_empty</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin.get_available_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the available interest point sources in a database</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBQueryMixin.get_available_static_features">
<code class="sig-name descname">get_available_static_features</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">'query'</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">error_empty</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin.get_available_static_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Return available static features from the CleanAir database</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBQueryMixin.get_laqn_readings">
<code class="sig-name descname">get_laqn_readings</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">'query'</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">error_empty</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin.get_laqn_readings" title="Permalink to this definition">¶</a></dt>
<dd><p>Get LAQN readings from database</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBQueryMixin.get_satellite_readings_pred">
<code class="sig-name descname">get_satellite_readings_pred</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">'query'</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">error_empty</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin.get_satellite_readings_pred" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Satellite data for the prediction period
Gets up to 72 hours of predicted data from the satellite readings
from the same reference_start_utc date as start_date</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBQueryMixin.get_satellite_readings_training">
<code class="sig-name descname">get_satellite_readings_training</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output_type</span><span class="o">=</span><span class="default_value">'query'</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">error_empty</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin.get_satellite_readings_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Satellite data for the training period
As we get 72 hours of Satellite forecast on each day,
here we only get Satellite data where the reference date
is the same as the forecast time.
i.e. Get data between start_datetime and end_datetime which
consists of the first 24 hours of forecasts on each of those days</p>
</dd></dl>

<dl class="py method">
<dt id="cleanair.mixins.DBQueryMixin.query_london_boundary">
<code class="sig-name descname">query_london_boundary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DBQueryMixin.query_london_boundary" title="Permalink to this definition">¶</a></dt>
<dd><p>Query LondonBoundary to obtain the bounding geometry for London</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.mixins.DateRangeMixin">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.mixins.</code><code class="sig-name descname">DateRangeMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">end</span></em>, <em class="sig-param"><span class="n">nhours</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DateRangeMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manage data ranges</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.mixins.DurationParserMixin">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.mixins.</code><code class="sig-name descname">DurationParserMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nhours</span><span class="o">=</span><span class="default_value">48</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">'lasthour'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DurationParserMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parser for any entrypoint which needs a duration</p>
<dl class="py method">
<dt id="cleanair.mixins.DurationParserMixin.parse_args">
<code class="sig-name descname">parse_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">namespace</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.DurationParserMixin.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise an exception if the provided arguments are invalid</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.mixins.SecretFileParserMixin">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.mixins.</code><code class="sig-name descname">SecretFileParserMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.SecretFileParserMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parser for any entrypoint which needs a secrets file</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.mixins.SourcesMixin">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.mixins.</code><code class="sig-name descname">SourcesMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sources</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.SourcesMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parser for any entrypoint which allows verbosity to be set</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.mixins.VerbosityMixin">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.mixins.</code><code class="sig-name descname">VerbosityMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.mixins.VerbosityMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parser for any entrypoint which allows verbosity to be set</p>
</dd></dl>

</div>
<div class="section" id="models-module">
<h2>Models module<a class="headerlink" href="#models-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cleanair.parsers">
<span id="parsers-module"></span><h2>Parsers module<a class="headerlink" href="#module-cleanair.parsers" title="Permalink to this headline">¶</a></h2>
<p>Module for cleanair parsers.</p>
<dl class="py class">
<dt id="cleanair.parsers.AQEReadingArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">AQEReadingArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nhours</span><span class="o">=</span><span class="default_value">48</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">'lasthour'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.AQEReadingArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.DurationParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for AQE readings</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.DataBaseRoleParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">DataBaseRoleParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.DataBaseRoleParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parser for configuring database roles</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.DatabaseSetupParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">DatabaseSetupParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.DatabaseSetupParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for inserting static datafiles</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.LAQNReadingArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">LAQNReadingArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nhours</span><span class="o">=</span><span class="default_value">48</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">'lasthour'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.LAQNReadingArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.DurationParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for LAQN readings</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.ModelFitParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">ModelFitParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.ModelFitParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.parsers.model.BaseModelParser</span></code></p>
<p>A parser for the model fitting entrypoint.</p>
<dl class="py method">
<dt id="cleanair.parsers.ModelFitParser.parse_kwargs">
<code class="sig-name descname">parse_kwargs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.ModelFitParser.parse_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>If the -c flag is passed, then load the config.json file
and overwrite any fields that are passed in kwargs.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.ModelValidationParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">ModelValidationParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.ModelValidationParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.parsers.model.BaseModelParser</span></code></p>
<p>A parser for model validation.</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.OsHighwayFeatureArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">OsHighwayFeatureArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sources</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.OsHighwayFeatureArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SourcesMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for OS highway features</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.SatelliteArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">SatelliteArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.SatelliteArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.DurationParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for Satellite readings</p>
<dl class="py method">
<dt id="cleanair.parsers.SatelliteArgumentParser.parse_args">
<code class="sig-name descname">parse_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">namespace</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.SatelliteArgumentParser.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether we have the Copernicus key and try to retrieve it from a local
secrets file if not</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.ScootForecastFeatureArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">ScootForecastFeatureArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.ScootForecastFeatureArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.DurationParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SourcesMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for converting SCOOT forecasts into model features</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.ScootReadingArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">ScootReadingArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.ScootReadingArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.DurationParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for SCOOT readings</p>
<dl class="py method">
<dt id="cleanair.parsers.ScootReadingArgumentParser.parse_args">
<code class="sig-name descname">parse_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">namespace</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.ScootReadingArgumentParser.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether we have AWS connection information and try to retrieve it from a
local secrets file if not</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.ScootReadingFeatureArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">ScootReadingFeatureArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nhours</span><span class="o">=</span><span class="default_value">48</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">'lasthour'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.ScootReadingFeatureArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.DurationParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SourcesMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for converting SCOOT readings into model features</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.ScootRoadmapArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">ScootRoadmapArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.ScootRoadmapArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for SCOOT road to detector mapping</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.StaticDatasetArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">StaticDatasetArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.StaticDatasetArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for static dataset uploads</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.StreetCanyonFeatureArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">StreetCanyonFeatureArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sources</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.StreetCanyonFeatureArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SourcesMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for OS highway features</p>
</dd></dl>

<dl class="py class">
<dt id="cleanair.parsers.UKMapFeatureArgumentParser">
<em class="property">class </em><code class="sig-prename descclassname">cleanair.parsers.</code><code class="sig-name descname">UKMapFeatureArgumentParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sources</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.parsers.UKMapFeatureArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SourcesMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.SecretFileParserMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">cleanair.mixins.parser_mixins.VerbosityMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Argument parsing for OS highway features</p>
</dd></dl>

</div>
<div class="section" id="processors-module">
<h2>Processors module<a class="headerlink" href="#processors-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cleanair.timestamps">
<span id="timestamps-module"></span><h2>Timestamps module<a class="headerlink" href="#module-cleanair.timestamps" title="Permalink to this headline">¶</a></h2>
<p>Module for timestamp conversions</p>
<dl class="py function">
<dt id="cleanair.timestamps.as_datetime">
<code class="sig-prename descclassname">cleanair.timestamps.</code><code class="sig-name descname">as_datetime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">maybe_dt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.timestamps.as_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an input that might be a datetime into a datetime</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.timestamps.datetime_from_str">
<code class="sig-prename descclassname">cleanair.timestamps.</code><code class="sig-name descname">datetime_from_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">naive_string</span></em>, <em class="sig-param"><span class="n">timezone</span></em>, <em class="sig-param"><span class="n">rounded</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.timestamps.datetime_from_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert naive string to localised datetime</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.timestamps.datetime_from_unix">
<code class="sig-prename descclassname">cleanair.timestamps.</code><code class="sig-name descname">datetime_from_unix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.timestamps.datetime_from_unix" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert unix timestamp to datetime</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.timestamps.to_nearest_hour">
<code class="sig-prename descclassname">cleanair.timestamps.</code><code class="sig-name descname">to_nearest_hour</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_datetime</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.timestamps.to_nearest_hour" title="Permalink to this definition">¶</a></dt>
<dd><p>Rounds to nearest hour by adding a timedelta of one hour if the minute is 30 or later then truncating on hour</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.timestamps.unix_from_str">
<code class="sig-prename descclassname">cleanair.timestamps.</code><code class="sig-name descname">unix_from_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">naive_string</span></em>, <em class="sig-param"><span class="n">timezone</span></em>, <em class="sig-param"><span class="n">rounded</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.timestamps.unix_from_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert naive string to unix timestamp</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.timestamps.utcstr_from_datetime">
<code class="sig-prename descclassname">cleanair.timestamps.</code><code class="sig-name descname">utcstr_from_datetime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_datetime</span></em>, <em class="sig-param"><span class="n">rounded</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.timestamps.utcstr_from_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert datetime to UTC string</p>
</dd></dl>

<dl class="py function">
<dt id="cleanair.timestamps.utcstr_from_unix">
<code class="sig-prename descclassname">cleanair.timestamps.</code><code class="sig-name descname">utcstr_from_unix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span></em>, <em class="sig-param"><span class="n">rounded</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cleanair.timestamps.utcstr_from_unix" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert unix timestamp to UTC string</p>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">cleanair</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cleanair Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dashboard-module">Dashboard module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cleanair.databases">Databases module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cleanair.decorators">Decorators module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cleanair.features">Features module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cleanair.inputs">Inputs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cleanair.loggers">Loggers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cleanair.metrics">Metrics module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cleanair.mixins">Mixins module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#models-module">Models module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cleanair.parsers">Parsers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#processors-module">Processors module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-cleanair.timestamps">Timestamps module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide.html">User’s Guide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">Welcome to cleanair’s documentation!</a></li>
      <li>Next: <a href="../guide.html" title="next chapter">User’s Guide</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Oscar Giles.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/cleanair_rst/cleanair.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>